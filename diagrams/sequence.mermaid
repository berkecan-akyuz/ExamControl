sequenceDiagram
    participant P as Proctor
    participant FE as Frontend (React)
    participant ML as ML Service (face-api)
    participant BE as Backend (Node)
    participant DB as Database (SQL)

    P->>FE: Select Exam & Student
    FE->>BE: Get Student/Seat Details
    BE->>DB: Query ExamRoster
    DB-->>BE: Return Roster Info & Ref Photo
    BE-->>FE: Show Student Info

    P->>FE: Capture Live Photo
    FE->>ML: Detect & Match Face (Live vs Ref)
    ML-->>FE: Match Result (Score > Threshold?)

    alt Match Found
        FE->>FE: Check Seat Compliance
        FE->>BE: Submit Check-in (Status=Present)
        BE->>DB: Update Roster & Insert Log
        DB-->>BE: Success
        BE-->>FE: Success Confirmation
        P->>Student: "Proceed to Seat X"
    else No Match
        FE->>FE: Alert Proctor
        P->>FE: Retry or Manual Override
        opt Log Violation
            P->>FE: Log Identity Mismatch
            FE->>BE: Create Violation Record
            BE->>DB: Insert Violation
        end
    end
